<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å½±åƒå­¦æœ¯ç ”ç©¶è®¡ç®—å·¥å…· v3.2</title>
    <style>
        :root {
            --primary: #4f46e5;
            --secondary: #7c3aed;
            --success: #22c55e;
            --warning: #f59e0b;
            --error: #ef4444;
            --bg: #ffffff;
            --text: #1e293b;
            --card: #f8fafc;
            --border: #e2e8f0;
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            --normal-color: #22c55e;
            --renal-color: #f59e0b;
            --metformin-color: #ef4444;
            --heart-color: #3b82f6;
        }

        [data-theme="dark"] {
            --primary: #6366f1;
            --secondary: #8b5cf6;
            --success: #10b981;
            --warning: #f59e0b;
            --error: #f87171;
            --bg: #0f172a;
            --text: #e2e8f0;
            --card: #1e293b;
            --border: #374151;
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.3);
            --heart-color: #60a5fa;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Microsoft YaHei', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: var(--text);
            min-height: 100vh;
            padding: 20px;
            transition: all 0.3s ease;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: var(--bg);
            border-radius: 20px;
            padding: 30px;
            box-shadow: var(--shadow);
            position: relative;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            position: relative;
        }

        .theme-toggle {
            position: absolute;
            top: 0;
            right: 0;
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 25px;
            padding: 8px 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
            color: var(--text);
        }

        .theme-toggle:hover {
            background: var(--primary);
            color: white;
            transform: translateY(-2px);
        }

        h1 {
            font-size: 2.8em;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 15px;
        }

        .subtitle {
            font-size: 1.2em;
            color: var(--text);
            opacity: 0.8;
            margin-bottom: 20px;
        }

        .developer-info {
            margin: 15px 0;
            padding: 10px 20px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            border-radius: 25px;
            font-size: 14px;
            font-weight: 600;
            display: inline-block;
        }

        /* ç”µå­é’Ÿæ ·å¼ */
        .clock-container {
            background: linear-gradient(145deg, #ffffff, #f8f9fa);
            border: 2px solid transparent;
            background-clip: padding-box;
            border-radius: 16px;
            padding: 20px;
            margin: 25px 0;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 
                0 8px 32px rgba(79, 70, 229, 0.1),
                inset 0 1px 3px rgba(255, 255, 255, 0.8),
                inset 0 -1px 2px rgba(0, 0, 0, 0.05);
            position: relative;
            overflow: hidden;
        }

        .clock-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            padding: 2px;
            background: linear-gradient(135deg, var(--primary), var(--secondary), #22c55e, var(--primary));
            border-radius: 16px;
            mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            mask-composite: exclude;
            z-index: -1;
            animation: borderGlow 3s ease-in-out infinite alternate;
        }

        @keyframes borderGlow {
            0% { opacity: 0.6; transform: scale(1); }
            100% { opacity: 1; transform: scale(1.02); }
        }

        .clock-container:hover {
            transform: translateY(-2px);
            box-shadow: 
                0 12px 40px rgba(79, 70, 229, 0.15),
                inset 0 1px 3px rgba(255, 255, 255, 0.9),
                inset 0 -1px 2px rgba(0, 0, 0, 0.05);
        }

        .digits-container {
            display: flex;
            gap: 12px;
            align-items: center;
        }

        .digit-group {
            display: flex;
            gap: 8px;
        }

        .digit {
            position: relative;
            width: 60px;
            height: 100px;
            background: linear-gradient(145deg, #f8f9fa, #e9ecef);
            padding: 8px;
            border-radius: 8px;
            box-shadow: 
                0 2px 8px rgba(0, 0, 0, 0.1),
                inset 0 1px 2px rgba(255, 255, 255, 0.8),
                inset 0 -1px 1px rgba(0, 0, 0, 0.05);
            border: 1px solid rgba(79, 70, 229, 0.1);
            transition: all 0.3s ease;
        }

        .digit:hover {
            transform: translateY(-1px);
            box-shadow: 
                0 4px 12px rgba(0, 0, 0, 0.15),
                inset 0 1px 2px rgba(255, 255, 255, 0.9),
                inset 0 -1px 1px rgba(0, 0, 0, 0.05);
        }

        .segment {
            position: absolute;
            background: transparent;
            border-radius: 3px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* ä¿®å¤åçš„æ•°å­—æ®µæ ·å¼ - ç™½å¤©æ¨¡å¼ï¼šé»‘è‰²é€æ˜èƒŒæ™¯æ— é˜´å½± */
        .segment.active {
            background: #333333;
            /* ç§»é™¤æ‰€æœ‰é˜´å½±æ•ˆæœ */
            box-shadow: none;
        }

        /* æ°´å¹³æ®µ */
        .segment-a { top: 8px; left: 12px; width: 36px; height: 8px; }
        .segment-d { bottom: 8px; left: 12px; width: 36px; height: 8px; }
        .segment-g { top: 50%; left: 12px; width: 36px; height: 8px; transform: translateY(-50%); }

        /* å‚ç›´æ®µ */
        .segment-b { top: 12px; right: 8px; width: 8px; height: 36px; }
        .segment-c { bottom: 12px; right: 8px; width: 8px; height: 36px; }
        .segment-e { bottom: 12px; left: 8px; width: 8px; height: 36px; }
        .segment-f { top: 12px; left: 8px; width: 8px; height: 36px; }

        .clock-colon {
            font-size: 2.5rem;
            color: #333333;
            margin: 0 8px;
            font-weight: bold;
            text-shadow: 0 2px 4px rgba(51, 51, 51, 0.2);
            transition: all 0.3s ease;
        }

        .clock-label {
            font-size: 13px;
            color: var(--primary);
            text-align: center;
            margin-top: 12px;
            font-weight: 500;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
        }

        /* æš—è‰²ä¸»é¢˜ä¸‹çš„ç”µå­é’Ÿæ ·å¼ */
        [data-theme="dark"] .clock-container {
            background: linear-gradient(145deg, #1e293b, #334155);
            box-shadow: 
                0 8px 32px rgba(0, 0, 0, 0.3),
                inset 0 1px 3px rgba(255, 255, 255, 0.1),
                inset 0 -1px 2px rgba(0, 0, 0, 0.2);
        }

        [data-theme="dark"] .digit {
            background: linear-gradient(145deg, #334155, #475569);
            border: 1px solid rgba(99, 102, 241, 0.2);
            box-shadow: 
                0 2px 8px rgba(0, 0, 0, 0.3),
                inset 0 1px 2px rgba(255, 255, 255, 0.1),
                inset 0 -1px 1px rgba(0, 0, 0, 0.2);
        }

        [data-theme="dark"] .clock-colon {
            color: #ffffff;
            text-shadow: 0 0 8px rgba(255, 255, 255, 0.4);
        }

        /* ä¿®å¤åçš„æš—è‰²ä¸»é¢˜æ•°å­—æ®µæ ·å¼ - å¤œé—´æ¨¡å¼ï¼šç™½è‰²é€æ˜èƒŒæ™¯æ— é˜´å½± */
        [data-theme="dark"] .segment.active {
            background: #ffffff;
            /* ç§»é™¤æ‰€æœ‰é˜´å½±æ•ˆæœ */
            box-shadow: none;
        }

        /* æ‚£è€…åˆ†ç±»é€‰æ‹©å™¨ */
        .patient-category-selector {
            background: var(--card);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: var(--shadow);
            border: 2px solid var(--border);
        }

        .category-title {
            text-align: center;
            font-size: 1.8em;
            color: var(--primary);
            margin-bottom: 25px;
            font-weight: 700;
        }

        .category-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 25px;
        }

        .category-card {
            background: var(--bg);
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            cursor: pointer;
            border: 3px solid transparent;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .category-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            transition: all 0.3s ease;
        }

        .category-card.normal::before { background: var(--normal-color); }
        .category-card.renal::before { background: var(--renal-color); }
        .category-card.metformin::before { background: var(--metformin-color); }
        .category-card.heart::before { background: var(--heart-color); }

        .category-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }

        .category-card.active {
            border-color: var(--primary);
            transform: translateY(-3px);
            box-shadow: 0 8px 30px rgba(79, 70, 229, 0.2);
        }

        .category-card.normal.active {
            border-color: var(--normal-color);
            box-shadow: 0 8px 30px rgba(34, 197, 94, 0.2);
        }

        .category-card.renal.active {
            border-color: var(--renal-color);
            box-shadow: 0 8px 30px rgba(245, 158, 11, 0.2);
        }

        .category-card.metformin.active {
            border-color: var(--metformin-color);
            box-shadow: 0 8px 30px rgba(239, 68, 68, 0.2);
        }

        .category-card.heart.active {
            border-color: var(--heart-color);
            box-shadow: 0 8px 30px rgba(59, 130, 246, 0.2);
        }

        .category-icon {
            font-size: 3em;
            margin-bottom: 15px;
            display: block;
        }

        .category-name {
            font-size: 1.4em;
            font-weight: 700;
            margin-bottom: 10px;
        }

        .category-description {
            font-size: 0.95em;
            color: var(--text);
            opacity: 0.7;
            line-height: 1.5;
        }

        .category-card.normal .category-name { color: var(--normal-color); }
        .category-card.renal .category-name { color: var(--renal-color); }
        .category-card.metformin .category-name { color: var(--metformin-color); }
        .category-card.heart .category-name { color: var(--heart-color); }

        /* è¡¨å•åŒºåŸŸ */
        .form-container {
            display: none;
            animation: slideIn 0.5s ease;
        }

        .form-container.show {
            display: block;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .form-section {
            background: var(--card);
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 25px;
            border: 1px solid var(--border);
            transition: all 0.3s ease;
        }

        .form-section:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }

        .section-title {
            font-size: 1.3em;
            margin-bottom: 20px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section-title.normal { color: var(--normal-color); }
        .section-title.renal { color: var(--renal-color); }
        .section-title.metformin { color: var(--metformin-color); }
        .section-title.heart { color: var(--heart-color); }

        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            position: relative;
        }

        label {
            font-weight: 500;
            color: var(--text);
            margin-bottom: 8px;
            font-size: 14px;
        }

        .required {
            color: var(--error);
        }

        input, select {
            padding: 12px 16px;
            border: 2px solid var(--border);
            border-radius: 10px;
            font-size: 16px;
            background: var(--bg);
            color: var(--text);
            transition: all 0.3s ease;
        }

        input:focus, select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1);
        }

        .input-hint {
            font-size: 12px;
            color: var(--text);
            opacity: 0.6;
            margin-top: 4px;
        }

        .input-error {
            border-color: var(--error) !important;
            background-color: rgba(239, 68, 68, 0.05);
        }

        .error-message {
            color: var(--error);
            font-size: 12px;
            margin-top: 4px;
            display: none;
        }

        .info-box {
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            font-size: 14px;
            line-height: 1.6;
            border-left: 4px solid;
        }

        .info-box.normal {
            background: linear-gradient(135deg, #dcfce7, #bbf7d0);
            color: #065f46;
            border-left-color: var(--normal-color);
        }

        .info-box.renal {
            background: linear-gradient(135deg, #fef3c7, #fed7aa);
            color: #92400e;
            border-left-color: var(--renal-color);
        }

        .info-box.metformin {
            background: linear-gradient(135deg, #fecaca, #fca5a5);
            color: #991b1b;
            border-left-color: var(--metformin-color);
        }

        .info-box.heart {
            background: linear-gradient(135deg, #dbeafe, #bfdbfe);
            color: #1e3a8a;
            border-left-color: var(--heart-color);
        }

        /* åˆ†çº§æ ‡å‡†è¡¨æ ¼æ ·å¼ */
        .grading-table {
            width: 100%;
            margin: 15px 0;
            border-collapse: collapse;
            font-size: 12px;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .grading-table th {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 10px 8px;
            text-align: center;
            font-weight: 600;
            font-size: 11px;
        }

        .grading-table td {
            padding: 8px;
            border: 1px solid #e2e8f0;
            text-align: center;
            font-size: 11px;
        }

        .grading-table .grade-level {
            font-weight: 700;
            white-space: nowrap;
        }

        .grade-low { color: var(--normal-color); }
        .grade-moderate { color: var(--renal-color); }
        .grade-high { color: var(--metformin-color); }
        .grade-very-high { color: var(--error); }

        .btn {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(79, 70, 229, 0.3);
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .btn-group {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }

        .btn-secondary {
            background: var(--card);
            color: var(--text);
            border: 2px solid var(--border);
        }

        .btn-secondary:hover:not(:disabled) {
            background: var(--border);
        }

        .results {
            background: var(--card);
            padding: 25px;
            border-radius: 15px;
            border: 1px solid var(--border);
            margin-top: 25px;
            display: none;
            animation: slideIn 0.5s ease;
        }

        .results.show { display: block; }

        .result-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            margin-bottom: 12px;
            background: var(--bg);
            border-radius: 10px;
            border-left: 4px solid var(--primary);
            transition: all 0.3s ease;
        }

        .result-item:hover {
            transform: translateX(5px);
            box-shadow: var(--shadow);
        }

        .result-label {
            font-weight: 500;
            color: var(--text);
        }

        .result-value {
            font-size: 1.2em;
            color: var(--primary);
            font-weight: 700;
        }

        .calc-type {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            margin-bottom: 20px;
            font-weight: 600;
            text-align: center;
            font-size: 14px;
        }

        .progress-bar {
            width: 100%;
            height: 6px;
            background: var(--border);
            border-radius: 3px;
            overflow: hidden;
            margin: 20px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            width: 0%;
            transition: width 0.3s ease;
        }

        .real-time-validation {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 18px;
        }

        .validation-success { color: var(--success); }
        .validation-error { color: var(--error); }

        .formula-display {
            background: var(--bg);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 10px;
            margin-top: 10px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            color: var(--text);
            opacity: 0.8;
        }

        .disclaimer {
            background: linear-gradient(135deg, #fef7cd, #fed7aa);
            color: #92400e;
            padding: 20px;
            border-radius: 15px;
            border-left: 4px solid var(--warning);
            margin-top: 25px;
            font-size: 13px;
            line-height: 1.6;
        }

        .disclaimer h3 {
            margin-bottom: 15px;
            font-size: 16px;
            font-weight: 700;
        }

        .highlight {
            font-weight: 700;
            color: #b45309;
        }

        /* æš—è‰²ä¸»é¢˜é€‚é… */
        [data-theme="dark"] .grading-table {
            background: #1e293b;
        }

        [data-theme="dark"] .grading-table td {
            border-color: #374151;
        }

        @media (max-width: 768px) {
            body { padding: 10px; }
            .container { padding: 20px; }
            h1 { font-size: 2.2em; }
            .form-row { grid-template-columns: 1fr; gap: 15px; }
            .theme-toggle { position: relative; margin-bottom: 20px; }
            .btn-group { flex-direction: column; }
            
            .category-grid {
                grid-template-columns: 1fr;
                gap: 12px;
            }

            .grading-table {
                font-size: 10px;
            }

            .grading-table th,
            .grading-table td {
                padding: 6px 4px;
            }

            /* ç§»åŠ¨ç«¯ç”µå­é’Ÿä¼˜åŒ– */
            .clock-container {
                padding: 25px 15px;
                margin: 25px 0;
                border-radius: 20px;
            }
            
            .digits-container {
                gap: 10px;
                transform: scale(1.1);
            }
            
            .digit {
                width: 55px;
                height: 90px;
                border-radius: 10px;
                padding: 10px;
                box-shadow: 
                    0 4px 12px rgba(0, 0, 0, 0.15),
                    inset 0 2px 4px rgba(255, 255, 255, 0.8),
                    inset 0 -2px 3px rgba(0, 0, 0, 0.05);
            }
            
            .digit:hover {
                transform: translateY(-2px);
            }
            
            /* ç§»åŠ¨ç«¯æ®µæ›´ç²—æ›´æ¸…æ™° */
            .segment-a, .segment-d, .segment-g {
                width: 35px;
                height: 6px;
                left: 10px;
            }
            
            .segment-b, .segment-c, .segment-e, .segment-f {
                width: 6px;
                height: 32px;
            }
            
            .segment-b, .segment-c {
                right: 10px;
            }
            
            .segment-e, .segment-f {
                left: 10px;
            }
            
            .segment-a { top: 10px; }
            .segment-d { bottom: 10px; }
            .segment-g { top: 50%; transform: translateY(-50%); }
            .segment-b { top: 14px; }
            .segment-c { bottom: 14px; }
            .segment-e { bottom: 14px; }
            .segment-f { top: 14px; }
            
            .clock-colon {
                font-size: 2.2rem;
                margin: 0 6px;
                font-weight: 900;
            }
            
            .clock-label {
                font-size: 14px;
                margin-top: 15px;
                font-weight: 600;
            }
        }

        @media print {
            body { background: white; color: black; }
            .container { background: white; box-shadow: none; }
            .btn, .theme-toggle, .patient-category-selector, .clock-container { display: none; }
            .no-print { display: none; }
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="header">
            <div class="theme-toggle" onclick="toggleTheme()">
                <span id="theme-icon">ğŸŒ™</span>
                <span id="theme-text">å¤œé—´æ¨¡å¼</span>
            </div>
            <h1>å½±åƒå­¦æœ¯ç ”ç©¶è®¡ç®—å·¥å…·</h1>
            <div class="subtitle">CTAé€ å½±å‰‚ç”¨é‡ä¸BMIå­¦æœ¯å‚è€ƒè®¡ç®— v3.2</div>
            <div class="developer-info">
                ğŸ’» ç¨‹åºå¼€å‘è€…ï¼šå½±åƒæ¶›å“¥
            </div>
            
            <!-- ç”µå­é’Ÿ -->
            <div class="clock-container">
                <div class="digits-container">
                    <div class="digit-group">
                        <div class="digit" id="hour-tens">
                            <div class="segment segment-a"></div>
                            <div class="segment segment-b"></div>
                            <div class="segment segment-c"></div>
                            <div class="segment segment-d"></div>
                            <div class="segment segment-e"></div>
                            <div class="segment segment-f"></div>
                            <div class="segment segment-g"></div>
                        </div>
                        <div class="digit" id="hour-ones">
                            <div class="segment segment-a"></div>
                            <div class="segment segment-b"></div>
                            <div class="segment segment-c"></div>
                            <div class="segment segment-d"></div>
                            <div class="segment segment-e"></div>
                            <div class="segment segment-f"></div>
                            <div class="segment segment-g"></div>
                        </div>
                    </div>
                    
                    <div class="clock-colon">:</div>
                    
                    <div class="digit-group">
                        <div class="digit" id="min-tens">
                            <div class="segment segment-a"></div>
                            <div class="segment segment-b"></div>
                            <div class="segment segment-c"></div>
                            <div class="segment segment-d"></div>
                            <div class="segment segment-e"></div>
                            <div class="segment segment-f"></div>
                            <div class="segment segment-g"></div>
                        </div>
                        <div class="digit" id="min-ones">
                            <div class="segment segment-a"></div>
                            <div class="segment segment-b"></div>
                            <div class="segment segment-c"></div>
                            <div class="segment segment-d"></div>
                            <div class="segment segment-e"></div>
                            <div class="segment segment-f"></div>
                            <div class="segment segment-g"></div>
                        </div>
                    </div>
                    
                    <div class="clock-colon">:</div>
                    
                    <div class="digit-group">
                        <div class="digit" id="sec-tens">
                            <div class="segment segment-a"></div>
                            <div class="segment segment-b"></div>
                            <div class="segment segment-c"></div>
                            <div class="segment segment-d"></div>
                            <div class="segment segment-e"></div>
                            <div class="segment segment-f"></div>
                            <div class="segment segment-g"></div>
                        </div>
                        <div class="digit" id="sec-ones">
                            <div class="segment segment-a"></div>
                            <div class="segment segment-b"></div>
                            <div class="segment segment-c"></div>
                            <div class="segment segment-d"></div>
                            <div class="segment segment-e"></div>
                            <div class="segment segment-f"></div>
                            <div class="segment segment-g"></div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="clock-label">å½“å‰æ—¶é—´</div>
        </div>
        
        <!-- æ‚£è€…åˆ†ç±»é€‰æ‹©å™¨ -->
        <div class="patient-category-selector">
            <div class="category-title">è¯·é€‰æ‹©æ‚£è€…ç±»å‹</div>
            <div class="category-grid">
                <div class="category-card normal" onclick="selectPatientType('normal')">
                    <div class="category-icon">ğŸ‘¤</div>
                    <div class="category-name">æ­£å¸¸æ‚£è€…</div>
                    <div class="category-description">
                        è‚¾åŠŸèƒ½æ­£å¸¸<br>
                        æ— äºŒç”²åŒèƒç”¨è¯å²<br>
                        æ ‡å‡†è®¡ç®—æµç¨‹
                    </div>
                </div>
                
                <div class="category-card renal" onclick="selectPatientType('renal')">
                    <div class="category-icon">ğŸ«˜</div>
                    <div class="category-name">è‚¾åŠŸèƒ½å¼‚å¸¸æ‚£è€…</div>
                    <div class="category-description">
                        è‚¾åŠŸèƒ½ä¸å…¨<br>
                        éœ€è¦eGFRè¯„ä¼°<br>
                        é€ å½±å‰‚ç”¨é‡è°ƒæ•´
                    </div>
                </div>
                
                <div class="category-card metformin" onclick="selectPatientType('metformin')">
                    <div class="category-icon">ğŸ’Š</div>
                    <div class="category-name">äºŒç”²åŒèƒç”¨è¯æ‚£è€…</div>
                    <div class="category-description">
                        æœç”¨äºŒç”²åŒèƒ<br>
                        éœ€è¦é£é™©è¯„ä¼°<br>
                        ç‰¹æ®Šå¤„ç†æ–¹æ¡ˆ
                    </div>
                </div>

                <div class="category-card heart" onclick="selectPatientType('heart')">
                    <div class="category-icon">â¤ï¸</div>
                    <div class="category-name">å¿ƒåŠŸèƒ½ä¸å…¨æ‚£è€…</div>
                    <div class="category-description">
                        å¿ƒåŠŸèƒ½å¼‚å¸¸<br>
                        éœ€è¦NYHAåˆ†çº§è¯„ä¼°<br>
                        é€ å½±å‰‚ç”¨é‡é™åˆ¶
                    </div>
                </div>
            </div>
        </div>
        
        <!-- ç®€åŒ–çš„æ¼”ç¤ºåŒºåŸŸ -->
        <div class="info-box normal">
            <h3>ç”µå­é’Ÿæ ·å¼ä¿®å¤å®Œæˆ</h3>
            <p><strong>ä¿®å¤å†…å®¹ï¼š</strong></p>
            <ul>
                <li><strong>ç™½å¤©æ¨¡å¼ï¼š</strong>æ•°å­—æ˜¾ç¤ºä¸ºé»‘è‰²ï¼ŒèƒŒæ™¯é€æ˜ï¼Œæ— é˜´å½±æ•ˆæœ</li>
                <li><strong>å¤œé—´æ¨¡å¼ï¼š</strong>æ•°å­—æ˜¾ç¤ºä¸ºç™½è‰²ï¼ŒèƒŒæ™¯é€æ˜ï¼Œæ— é˜´å½±æ•ˆæœ</li>
                <li><strong>ä¿æŒåŸæœ‰ï¼š</strong>æ•°ç ç®¡å®¹å™¨çš„æ ·å¼å’ŒåŠ¨ç”»æ•ˆæœä¿æŒä¸å˜</li>
                <li><strong>å“åº”å¼ï¼š</strong>åœ¨ç§»åŠ¨ç«¯ä¹Ÿèƒ½æ­£ç¡®æ˜¾ç¤ºä¿®å¤åçš„æ ·å¼</li>
            </ul>
            <p>ç°åœ¨ç”µå­é’Ÿçš„æ•°å­—æ®µåœ¨ç™½å¤©æ˜¾ç¤ºä¸ºçº¯é»‘è‰²é€æ˜èƒŒæ™¯ï¼Œåœ¨å¤œé—´æ¨¡å¼ä¸‹æ˜¾ç¤ºä¸ºçº¯ç™½è‰²é€æ˜èƒŒæ™¯ï¼Œå®Œå…¨å»é™¤äº†é˜´å½±æ•ˆæœã€‚</p>
        </div>

        <div class="disclaimer">
            <h3>âš ï¸ é‡è¦ä½¿ç”¨å£°æ˜</h3>
            <p><span class="highlight">ä¸“ä¸šèƒŒæ™¯è¦æ±‚ï¼š</span>ä½¿ç”¨è€…é¡»æ˜¯åœ¨åŒ»å­¦å½±åƒç§‘å·¥ä½œçš„ä¸“ä¸šäººå‘˜ï¼Œç†Ÿæ‚‰CTæ£€æŸ¥æµç¨‹å’Œé€ å½±å‰‚ä½¿ç”¨è§„èŒƒã€‚</p>
            <p><span class="highlight">è®¾å¤‡ä¾æ®ï¼š</span>æœ¬å·¥å…·è®¡ç®—å…¬å¼åŸºäºè”å½±CT960+è®¾å¤‡çš„æŠ€æœ¯å‚æ•°å’Œä¸´åºŠç ”ç©¶æ•°æ®ã€‚</p>
            <p><span class="highlight">å­¦æœ¯ç”¨é€”ï¼š</span>ä»…ä¾›å½±åƒæŠ€æœ¯æ•™å­¦ã€å­¦æœ¯ç ”ç©¶ä½¿ç”¨ï¼Œä¸¥ç¦ç”¨äºä¸´åºŠè¯Šæ–­æˆ–æ²»ç–—å†³ç­–ã€‚</p>
            <p style="margin-top: 15px; font-weight: 700; color: #b45309; border-top: 1px solid #fed7aa; padding-top: 15px;">
                å¼€å‘è€…ä¸æ‰¿æ‹…ä»»ä½•ç›´æ¥æˆ–é—´æ¥çš„æ³•å¾‹è´£ä»»ï¼›ä½¿ç”¨å³è¡¨ç¤ºåŒæ„æœ¬å£°æ˜ã€‚
            </p>
        </div>
    </div>

    <script>
        // 7æ®µæ•°ç ç®¡æ•°å­—é…ç½®ï¼ˆa-gæ®µï¼‰
        const digitConfig = {
            '0': [1, 1, 1, 1, 1, 1, 0],
            '1': [0, 1, 1, 0, 0, 0, 0],
            '2': [1, 1, 0, 1, 1, 0, 1],
            '3': [1, 1, 1, 1, 0, 0, 1],
            '4': [0, 1, 1, 0, 0, 1, 1],
            '5': [1, 0, 1, 1, 0, 1, 1],
            '6': [1, 0, 1, 1, 1, 1, 1],
            '7': [1, 1, 1, 0, 0, 0, 0],
            '8': [1, 1, 1, 1, 1, 1, 1],
            '9': [1, 1, 1, 1, 0, 1, 1]
        };

        // å…¨å±€çŠ¶æ€ç®¡ç†
        const appState = {
            isDarkMode: false,
            currentPatientType: null,
            currentResults: null
        };

        // ç”µå­é’Ÿç›¸å…³å‡½æ•°
        function updateClock() {
            const now = new Date();
            const hours = now.getHours();
            const minutes = now.getMinutes();
            const seconds = now.getSeconds();

            // æ ¼å¼åŒ–æ—¶é—´å„éƒ¨åˆ†
            const hoursStr = hours.toString().padStart(2, '0');
            const minutesStr = minutes.toString().padStart(2, '0');
            const secondsStr = seconds.toString().padStart(2, '0');

            // æ›´æ–°æ•°ç ç®¡æ˜¾ç¤º
            displayDigit(document.getElementById('hour-tens'), hoursStr[0]);
            displayDigit(document.getElementById('hour-ones'), hoursStr[1]);
            displayDigit(document.getElementById('min-tens'), minutesStr[0]);
            displayDigit(document.getElementById('min-ones'), minutesStr[1]);
            displayDigit(document.getElementById('sec-tens'), secondsStr[0]);
            displayDigit(document.getElementById('sec-ones'), secondsStr[1]);
        }

        // æ˜¾ç¤ºæ•°å­—åˆ°7æ®µæ•°ç ç®¡
        function displayDigit(digitElement, number) {
            const segments = digitElement.querySelectorAll('.segment');
            const config = digitConfig[number] || digitConfig['0'];

            segments.forEach((segment, index) => {
                if (config[index] === 1) {
                    segment.classList.add('active');
                } else {
                    segment.classList.remove('active');
                }
            });
        }

        // ä¸»é¢˜åˆ‡æ¢åŠŸèƒ½ - ç®€åŒ–ç‰ˆæœ¬ï¼Œä¸å†éœ€è¦åŠ¨æ€è®¾ç½®æ ·å¼
        function toggleTheme() {
            try {
                appState.isDarkMode = !appState.isDarkMode;
                const body = document.body;
                const themeIcon = document.getElementById('theme-icon');
                const themeText = document.getElementById('theme-text');
                
                if (appState.isDarkMode) {
                    body.setAttribute('data-theme', 'dark');
                    if (themeIcon) themeIcon.textContent = 'â˜€ï¸';
                    if (themeText) themeText.textContent = 'æ—¥é—´æ¨¡å¼';
                } else {
                    body.removeAttribute('data-theme');
                    if (themeIcon) themeIcon.textContent = 'ğŸŒ™';
                    if (themeText) themeText.textContent = 'å¤œé—´æ¨¡å¼';
                }
                
                // ç”±äºå·²ç»åœ¨CSSä¸­å®šä¹‰äº†æ­£ç¡®çš„æ ·å¼ï¼Œè¿™é‡Œä¸å†éœ€è¦JavaScriptåŠ¨æ€ä¿®æ”¹
                console.log(`ä¸»é¢˜å·²åˆ‡æ¢è‡³: ${appState.isDarkMode ? 'å¤œé—´' : 'æ—¥é—´'}æ¨¡å¼`);
                
            } catch (error) {
                console.error('ä¸»é¢˜åˆ‡æ¢å‡ºé”™:', error);
                showNotification('âš ï¸ ä¸»é¢˜åˆ‡æ¢å¤±è´¥', 'warning');
            }
        }

        // æ‚£è€…ç±»å‹é€‰æ‹©
        function selectPatientType(type) {
            appState.currentPatientType = type;
            
            // æ›´æ–°UIçŠ¶æ€
            document.querySelectorAll('.category-card').forEach(card => {
                card.classList.remove('active');
            });
            document.querySelector(`.category-card.${type}`).classList.add('active');
            
            showNotification(`å·²é€‰æ‹©ï¼š${getPatientTypeName(type)}`, 'success');
        }

        function getPatientTypeName(type) {
            const names = {
                'normal': 'æ­£å¸¸æ‚£è€…',
                'renal': 'è‚¾åŠŸèƒ½å¼‚å¸¸æ‚£è€…',
                'metformin': 'äºŒç”²åŒèƒç”¨è¯æ‚£è€…',
                'heart': 'å¿ƒåŠŸèƒ½ä¸å…¨æ‚£è€…'
            };
            return names[type] || type;
        }

        // é€šçŸ¥æ˜¾ç¤ºå‡½æ•°
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed; top: 20px; right: 20px; padding: 15px 20px;
                border-radius: 8px; color: white; font-weight: 500; z-index: 1000;
                opacity: 0; transition: opacity 0.3s ease; max-width: 300px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            `;
            
            switch(type) {
                case 'success': notification.style.background = '#22c55e'; break;
                case 'error': notification.style.background = '#ef4444'; break;
                case 'warning': notification.style.background = '#f59e0b'; break;
                default: notification.style.background = '#3b82f6';
            }
            
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => notification.style.opacity = '1', 10);
            
            setTimeout(() => {
                notification.style.opacity = '0';
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                }, 300);
            }, 3000);
        }

        // é¡µé¢åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            try {
                // åˆå§‹åŒ–ç”µå­é’Ÿ
                updateClock();
                setInterval(updateClock, 1000); // æ¯ç§’æ›´æ–°ä¸€æ¬¡
                
                showNotification('âœ… ç”µå­é’Ÿæ ·å¼ä¿®å¤å®Œæˆï¼', 'success');
                
            } catch (error) {
                console.error('é¡µé¢åˆå§‹åŒ–å‡ºé”™:', error);
                showNotification('âš ï¸ é¡µé¢åˆå§‹åŒ–è¿‡ç¨‹ä¸­å‡ºç°é—®é¢˜', 'warning');
            }
        });

        // å…¨å±€é”™è¯¯å¤„ç†
        window.addEventListener('error', function(event) {
            console.error('å…¨å±€é”™è¯¯:', event.error);
        });

        window.addEventListener('unhandledrejection', function(event) {
            console.error('æœªå¤„ç†çš„Promiseæ‹’ç»:', event.reason);
        });
    </script>
</body>
</html>
